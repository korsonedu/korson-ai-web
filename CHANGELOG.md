# UniMind.ai 更新日志 (Changelog)

所有项目的重要更新都将记录在此文件中，以确保开发进度的可追溯性。

---

## [v2.4.0-stable] - 2026-02-24

### 🚀 核心特性 (Core Features)
- **AI 判卷协议 2.0 (Tag-based)**
    - 彻底弃用脆弱的 JSON 协议，改用 **语义标签 (Tag-based)** 通讯格式。
    - 实现了 LaTeX 数学公式的 100% 原生源码保护，解决了 `\frac` 等公式导致的解析截断与乱码问题。
    - 单次判分 `max_tokens` 提升至 8192，确保数千字的深度学术推导不再受物理限制。
- **语义化题目难度体系**
    - 引入感官难度分级：入门 (Entry)、简单 (Easy)、适当 (Normal)、困难 (Hard)、极限 (Extreme)。
    - 建立 ELO 自动映射机制（800 - 1600 基准分），管理员录题不再需要手动填写数字。
    - `seed_questions.json` 种子数据已全量迁移至新难度标准。
- **“拿捏 (Mastered)” 题目管理系统**
    - 新增“拿捏”交互功能，允许学生将已完全掌握的题目从个人题库中永久封存。
    - **逻辑闭环**：点击拿捏后，该题即时禁用、清空草稿，且不再进入本次测验的判分流程。
- **文章中心分页功能**
    - 上线文章列表分页加载（每页 20 条），支持流畅的页面跳转与状态同步。

### 🎨 交互与 UI/UX 优化
- **测试报告页重构 (High Efficiency)**
    - 布局升级为 **左右分栏矩阵模式**，大幅提升复盘时的“屏效比”。
    - 右侧引入**题号状态矩阵**，红色/绿色直观展示正误，支持秒级切换查看。
    - 优化了高度适配（90vh）与内边距，显著提升了深度解析内容的可读性。
- **自习室顶部标题集成**
    - 为自习室页面增加了全局 Header 标题展示，增强页面功能归属感。
- **通知中心视觉升级**
    - 显著放大了通知中心的内容字号（正文 12px / 标题 13px font-black），解决了文字看不清的问题。
- **消除前端抖动**
    - 将 `Select` 组件替换为 `DropdownMenu`，解决了 Radix UI 隐藏滚动条导致的页面宽度瞬间抖动。
- **页面屏效比优化**
    - 显著缩减了系统主展示区域的内边距（从 `px-10 py-10` 优化为 `px-8 py-6`），提升了核心内容的视觉承载力。

### 🛠️ 工程化与系统稳定性
- **数据库瘦身与模型优化**
    - 物理删除了 `User` 模型中的冗余字段 `avatar_url` 与 `is_online`，改为动态属性判定。
    - 修复了管理员账号在特定情况下被拦截、要求输入激活码的权限逻辑 Bug。
- **AI 模块深度解耦**
    - 新建 `backend/ai_service.py` 统筹全站 AI 调用。
    - 实现了判卷逻辑、助教对话、通用生成逻辑的完全解耦，支持场景化的 `tokens` 与 `temperature` 配置。
- **即时状态同步**
    - 提交试卷时，主线程立即更新 `last_review` 标记，确保异步判分期间不会抽到重复题。
- **版本标识更新**
    - 正式启用 **`SMART ACADEMIC ENGINE`** 作为系统标识语。

---

## [v2.3.0] - 2026-02-23

### 🛠️ 历史重构回顾
- 废弃基于 Cache 的临时报告方案，上线 `QuizExam` 持久化模型。
- 实现提交试卷后的异步判分流程，引入后台线程处理 AI 深度分析。
- 修复 AI 助教消息重复与乐观更新冲突问题。
